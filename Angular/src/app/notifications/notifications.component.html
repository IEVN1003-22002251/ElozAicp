<div class="notifications-container">
  <header class="notifications-header">
    <div class="header-left">
      <button class="btn-back" (click)="goBack()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Regresar
      </button>
      <h1 class="notifications-title">Notificaciones</h1>
    </div>
    <button class="btn-mark-all" (click)="markAllAsRead()" [disabled]="loading || unreadCount === 0">
      Marcar todas como leídas
    </button>
  </header>

  <!-- Filters -->
  <div class="filters-section">
    <button 
      class="filter-btn" 
      [class.active]="filter === 'all'"
      (click)="setFilter('all')"
    >
      Todas
    </button>
    <button 
      class="filter-btn" 
      [class.active]="filter === 'unread'"
      (click)="setFilter('unread')"
    >
      No leídas ({{ unreadCount }})
    </button>
    <button 
      class="filter-btn" 
      [class.active]="filter === 'read'"
      (click)="setFilter('read')"
    >
      Leídas
    </button>
  </div>

  <!-- Notifications List -->
  <div class="notifications-list">
    <div 
      class="notification-item" 
      *ngFor="let notification of filteredNotifications"
      [class.unread]="!notification.is_read"
      (click)="markAsRead(notification.id)"
    >
      <div class="notification-icon" [class]="getIconClass(notification.type)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path [attr.d]="getIconPath(notification.type)"></path>
        </svg>
      </div>
      <div class="notification-content">
        <h3 class="notification-title">{{ notification.title }}</h3>
        <p class="notification-message">{{ notification.message }}</p>
        <span class="notification-time">{{ formatTime(notification.created_at) }}</span>
      </div>
      <div class="notification-actions">
        <button class="btn-delete" (click)="deleteNotification(notification.id); $event.stopPropagation()" title="Eliminar">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          </svg>
        </button>
      </div>
    </div>
    <div class="empty-state" *ngIf="filteredNotifications.length === 0 && !loading">
      <p>No hay notificaciones</p>
    </div>
    <div class="loading-state" *ngIf="loading">
      <p>Cargando notificaciones...</p>
    </div>
  </div>
</div>

